package TestCases;

import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;
import org.w3c.dom.*;

import CommonFunction.CommonFuntions;
import CommonFunction.DataProvide;
import CommonFunction.DataReader;

public class LoginTest extends DataProvide{
	public CommonFuntions comfun;
	public DataReader dr;
	
	@BeforeTest
	public void setup() throws Exception {
		String url = "http://www.zhongchou.cn";
		comfun = new CommonFuntions(url);
		dr = new DataReader();
		
		//设置数据源
		init("src/TestData/LoginTest.xml");
	}
	
	@Test(dataProvider="Test_xml_dataprovider")
	public void testlogin(Document params) throws Exception {
		/**
		 * 检测登录
		 */
		comfun.login(dr.readnodevalue(params, "login", "username"), 
				dr.readnodevalue(params, "login", "password"));

		comfun.checkequal(comfun.gettext("xpath", dr.readnodevalue(params, "login", "checkpoint1")),
				dr.readnodevalue(params, "login", "value1"));
		//退出登录
		comfun.logout();
	}
	
	@AfterTest
	public void teardown() {
		comfun.teardown();
	}
	
	
	
}
